<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Library App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
        }
        .container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        .input-field {
            @apply p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-full;
        }
        .btn {
            @apply px-5 py-2 rounded-lg font-semibold transition-all duration-200;
        }
        .btn-primary {
            @apply bg-blue-600 text-white hover:bg-blue-700 shadow-md;
        }
        .btn-delete {
            @apply bg-red-500 text-white hover:bg-red-600 shadow-md;
        }
        .btn-update {
            @apply bg-yellow-500 text-white hover:bg-yellow-600 shadow-md;
        }
        .btn-clear {
            @apply bg-gray-300 text-gray-800 hover:bg-gray-400 shadow-md;
        }
        .table-header {
            @apply px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider;
        }
        .table-cell {
            @apply px-4 py-3 whitespace-nowrap text-sm text-gray-700;
        }
        .status-message {
            @apply p-3 mt-4 rounded-lg font-medium;
        }
        .status-success {
            @apply bg-green-100 text-green-800;
        }
        .status-error {
            @apply bg-red-100 text-red-800;
        }
    </style>
</head>
<body class="p-4">
    <div class="container">
        <h1 class="text-4xl font-extrabold text-center text-gray-800 mb-8">ðŸ“š Simple Library App</h1>

        <!-- Input Form -->
        <div class="bg-gray-50 p-6 rounded-xl mb-8 shadow-sm">
            <h2 class="text-2xl font-bold text-gray-700 mb-4">Add/Update Book</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div>
                    <label for="bookTitle" class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                    <input type="text" id="bookTitle" class="input-field" placeholder="Book Title">
                </div>
                <div>
                    <label for="bookAuthor" class="block text-sm font-medium text-gray-700 mb-1">Author</label>
                    <input type="text" id="bookAuthor" class="input-field" placeholder="Author Name">
                </div>
                <div>
                    <label for="bookYear" class="block text-sm font-medium text-gray-700 mb-1">Publication Year</label>
                    <input type="number" id="bookYear" class="input-field" placeholder="e.g., 2023">
                </div>
            </div>
            <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3">
                <button id="addBookBtn" class="btn btn-primary flex-1">Add Book</button>
                <button id="updateBookBtn" class="btn btn-update flex-1" style="display: none;">Update Selected Book</button>
                <button id="clearFormBtn" class="btn btn-clear flex-1">Clear Form</button>
            </div>
            <p id="message" class="status-message hidden"></p>
        </div>

        <!-- Book List -->
        <div class="bg-gray-50 p-6 rounded-xl shadow-sm">
            <h2 class="text-2xl font-bold text-gray-700 mb-4">Available Books</h2>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="table-header">ID</th>
                            <th class="table-header">Title</th>
                            <th class="table-header">Author</th>
                            <th class="table-header">Year</th>
                            <th class="table-header">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="bookList" class="bg-white divide-y divide-gray-200">
                        <!-- Books will be loaded here -->
                    </tbody>
                </table>
            </div>
            <p id="noBooksMessage" class="text-center text-gray-500 mt-4 hidden">No books added yet.</p>
        </div>
    </div>

    <script>
        // Simple in-memory "database" using an array
        let books = [];
        let nextBookId = 1;
        let editingBookId = null;

        const bookTitleInput = document.getElementById('bookTitle');
        const bookAuthorInput = document.getElementById('bookAuthor');
        const bookYearInput = document.getElementById('bookYear');
        const addBookBtn = document.getElementById('addBookBtn');
        const updateBookBtn = document.getElementById('updateBookBtn');
        const clearFormBtn = document.getElementById('clearFormBtn');
        const bookListTableBody = document.getElementById('bookList');
        const messageDisplay = document.getElementById('message');
        const noBooksMessage = document.getElementById('noBooksMessage');

        // Function to display messages
        function showMessage(msg, type = 'success') {
            messageDisplay.textContent = msg;
            messageDisplay.className = `status-message ${type === 'success' ? 'status-success' : 'status-error'}`;
            messageDisplay.classList.remove('hidden');
            setTimeout(() => {
                messageDisplay.classList.add('hidden');
            }, 3000);
        }

        // Function to render books to the table
        function renderBooks() {
            bookListTableBody.innerHTML = ''; // Clear existing entries
            if (books.length === 0) {
                noBooksMessage.classList.remove('hidden');
            } else {
                noBooksMessage.classList.add('hidden');
                books.forEach(book => {
                    const row = bookListTableBody.insertRow();
                    row.innerHTML = `
                        <td class="table-cell">${book.id}</td>
                        <td class="table-cell">${book.title}</td>
                        <td class="table-cell">${book.author}</td>
                        <td class="table-cell">${book.year}</td>
                        <td class="table-cell">
                            <div class="flex space-x-2">
                                <button class="btn btn-update px-3 py-1 text-sm" onclick="editBook(${book.id})">Edit</button>
                                <button class="btn btn-delete px-3 py-1 text-sm" onclick="deleteBook(${book.id})">Delete</button>
                            </div>
                        </td>
                    `;
                });
            }
        }

        // Add a new book
        addBookBtn.addEventListener('click', () => {
            const title = bookTitleInput.value.trim();
            const author = bookAuthorInput.value.trim();
            const year = parseInt(bookYearInput.value);

            if (!title || !author || isNaN(year)) {
                showMessage('Please fill in all fields correctly.', 'error');
                return;
            }

            const newBook = {
                id: nextBookId++,
                title,
                author,
                year
            };
            books.push(newBook);
            renderBooks();
            clearForm();
            showMessage('Book added successfully!');
        });

        // Edit a book (load into form)
        function editBook(id) {
            const bookToEdit = books.find(book => book.id === id);
            if (bookToEdit) {
                bookTitleInput.value = bookToEdit.title;
                bookAuthorInput.value = bookToEdit.author;
                bookYearInput.value = bookToEdit.year;
                editingBookId = id;
                addBookBtn.style.display = 'none';
                updateBookBtn.style.display = 'block';
                showMessage('Editing book: ' + bookToEdit.title, 'success');
            }
        }

        // Update selected book
        updateBookBtn.addEventListener('click', () => {
            const title = bookTitleInput.value.trim();
            const author = bookAuthorInput.value.trim();
            const year = parseInt(bookYearInput.value);

            if (!title || !author || isNaN(year) || editingBookId === null) {
                showMessage('Please fill in all fields correctly and select a book to update.', 'error');
                return;
            }

            const bookIndex = books.findIndex(book => book.id === editingBookId);
            if (bookIndex > -1) {
                books[bookIndex] = {
                    ...books[bookIndex], // Keep existing properties
                    title,
                    author,
                    year
                };
                renderBooks();
                clearForm();
                showMessage('Book updated successfully!');
            } else {
                showMessage('Error: Book not found for update.', 'error');
            }
        });

        // Delete a book
        function deleteBook(id) {
            // Using a simple confirmation for demonstration. In a real app, use a modal.
            if (confirm('Are you sure you want to delete this book?')) {
                books = books.filter(book => book.id !== id);
                renderBooks();
                clearForm(); // Clear form if the deleted book was being edited
                showMessage('Book deleted successfully!');
            }
        }

        // Clear the form
        clearFormBtn.addEventListener('click', clearForm);
        function clearForm() {
            bookTitleInput.value = '';
            bookAuthorInput.value = '';
            bookYearInput.value = '';
            editingBookId = null;
            addBookBtn.style.display = 'block';
            updateBookBtn.style.display = 'none';
            messageDisplay.classList.add('hidden'); // Hide message on clear
        }

        // Initial render when the page loads
        document.addEventListener('DOMContentLoaded', renderBooks);
    </script>
</body>
</html>
